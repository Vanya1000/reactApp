{"version":3,"sources":["components/Header/Header.module.css","api/chat-api.ts","redux/chat-reducer.ts","components/Music/Music.module.css","components/Notes/NotesPost/NotesPost.module.css","components/common/Preloader/Preloader.module.css","components/Profile/Profile.module.css","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Dialogs/DialogItem/DialogItem.module.css","components/Dialogs/Message/Message.module.css","reportWebVitals.js","api/api.ts","api/auth-api.ts","api/security-api.ts","redux/auth-reducer.ts","redux/appReducer.ts","redux/dialogsReducer.ts","redux/noteReducer.ts","api/profile-api.ts","redux/profileReducer.ts","redux/sidebarReducer.ts","api/user-api.ts","redux/usersReducer.ts","redux/redux-store.ts","components/Settings/Settings.jsx","components/News/test.jsx","components/News/News.tsx","components/Music/Music.tsx","components/Notes/NotesPost/NotesPost.tsx","components/Notes/Notes.tsx","components/Notes/NotesContainer.tsx","assets/images/Circle-Loading.svg","components/common/Preloader/Preloader.tsx","redux/users-selectors.ts","assets/images/user.png","components/Users/User.tsx","components/Users/UsersSearchForm.tsx","components/Users/Users.tsx","components/Users/UsersContainer.tsx","components/Profile/ProfileInfo/ProfileStatusWithHoocs.tsx","components/Profile/ProfileInfo/ProfileDataForm.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/Profile.tsx","HOC/withAuthRedirect.tsx","components/Profile/ProfileContainer.tsx","components/Dialogs/DialogItem/DialogItem.tsx","components/Dialogs/Message/Message.tsx","components/Dialogs/Dialogs.tsx","components/Dialogs/DialogsContainer.tsx","HOC/withSuspense.tsx","components/Login/Login.tsx","redux/auth-selectors.ts","components/Header/HeaderLogin.tsx","App.tsx","index.js","components/Users/User.module.css","components/Notes/Notes.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Dialogs/Dialogs.module.css","components/Login/Login.module.css"],"names":["module","exports","subcribers","ws","closeHandler","notifySubscribersAboutStatus","setTimeout","createChannel","messageHandler","e","newMessages","JSON","parse","data","forEach","s","openHandler","errorHandler","console","error","cleanUp","removeEventListener","status","close","WebSocket","addEventListener","chatAPI","eventName","callback","push","filter","message","send","initialState","messages","actions","type","payload","_newMessageHandler","newMessageHandlerCreator","dispatch","_statusChangedHandler","statusChangedHandlerCreator","startMessagesListening","a","stopMessagesListening","sendMessage","chatReducer","state","action","map","m","id","v1","index","array","length","ResultCodeForCaptchaEnum","ResultCodesEnum","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","instance","axios","create","withCredentials","baseURL","headers","authAPI","get","res","email","password","rememberMe","captcha","post","delete","securityAPI","login","isAuth","isWrong","captchaUrl","getAuthUserData","checksLoginData","resultCode","Success","getCaptchaUrl","captchaData","url","authReducer","initialized","appReducer","dialogs","name","dialogsReducer","newMessage","note","newNoteText","textInputTextarea","newText","noteReducer","profileAPI","userId","newStatusText","put","photoFile","formData","FormData","append","profile","posts","likesCount","newPost","photos","statusText","getUserProfileThunkCreator","userProfileData","profileReducer","p","postId","friends","sidebarReducer","usersAPI","getUsers","currentPage","pageSize","term","friend","response","setFollow","setUnfollow","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_PAGE_SIZE","SET_COUNT_ALL_USERS","TOGGLE_IS_FETCHING","TOGGLE_IS_FOLLOWING_PROGRESS","SET_FILTER","users","totalUserCount","isFetching","followingInProgress","countAllUsers","getUsersThunkCreator","getState","items","totalCount","usersReducer","u","followed","rootReducer","combineReducers","profilePage","dialogsPage","sidebar","usersPage","app","auth","chat","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","Settings","ProductCategoryRow","category","this","props","colSpan","React","Component","ProductRow","product","stocked","style","color","price","ProductTable","filterText","inStockOnly","rows","lastCategory","products","indexOf","children","SearchBar","handleFilterTextChange","bind","handleInStockChange","onFilterTextChange","target","value","onInStockChange","checked","placeholder","onChange","FilterableProductTable","setState","MyContext","Consumer","log","Test","Provider","PRODUCTS","createContext","News","Music","Github","useState","selectedUser","setSelectedUser","searchTerm","setSearchTerm","useEffect","document","title","flex","onSubmit","onClick","onUserSelect","Search","tempSearch","setTempSearch","currentTarget","UsersList","setUsers","className","selected","Timer","seconds","timerKey","timer","setTimer","intervalId","setInterval","prev","clearInterval","UserDetails","userDetails","setUserDetails","setSeconds","toString","src","avatar_url","alt","followers","NotesPost","notes__post","Notes","noteItem","notes","notesItem","newNotesElement","createRef","notes__wrapper","notes__title","notes__visualBlock","notes__sendBlock","ref","current","updateNewNoteTextActionCreator","addNoteActionCreator","NotesContainer","connect","Preloader","wpapperGif","preloader","getUsersSuper","createSelector","getPageSize","getTotalUserCount","getCurrentPage","getIsFetching","getFollowingInProgress","getUsersFilter","User","user","unfollow","follow","user__wrapper","user__leftBlock","user__foto","to","small","userPhoto","user__button","disabled","user__rightBlock","user__name","user__status","user__location","user__locationCity","user__locationCountry","UsersSearchForm","memo","useForm","register","setValue","handleSubmit","formState","errors","onFilterChanged","useSelector","Users","useDispatch","history","useHistory","search","location","parsed","queryString","substr","actualPage","actualFilter","page","Number","query","String","pathname","showQuickJumper","defaultCurrent","total","defaultPageSize","pageNumber","onPageChanged","onShowSizeChange","size","getUsersOnPageSize","UsersPage","updateTextStatusThuncCreator","editMode","setEditMode","setStatus","autoFocus","onBlur","ProfileDataForm","saveProfile","goToExitEditMode","reset","fullName","aboutMe","lookingForAJob","lookingForAJobDescription","Object","keys","contacts","key","item","ProfileData","isOwner","goToEditMode","facebook","website","vk","twitter","instagram","youtube","github","mainLink","ProfileInfo","discriptionBlock","large","files","savePhoto","ProfileStatusWithHoocs","Post","MyPosts","postsElement","postsBlock","messageBlock","AddPostForm","mode","addPost","formBlock","required","maxLength","MyPostsContainer","Profile","pad","mapStateToPropsForRedirect","withAuthRedirect","WrappedComponent","restProps","setUserProfile","ProfileContainer","match","params","getStatusThuncCreator","refreshProfile","prevProps","prevState","getStatusData","file","savePhotoData","photo","withRouter","DialogItem","nameChat","Message","AddMessageForm","addMessage","Dialogs","dialogsElements","d","messagesElements","dialogs__item","dialogInput","withSuspense","fallback","Loginform","onSubmitCall","control","rules","render","field","Password","defaultValue","htmlType","Login","loginData","CaptchaIsRequired","selectIsAuth","selectCurrentUserLogin","HeaderLogin","logoutCallback","header","login__block","icon","PoweroffOutlined","SubMenu","Menu","Header","Layout","Content","Footer","Sider","ChatPage","lazy","SuspendedDialogs","DialogsContainer","SuspendedProfile","SuspendedChat","App","initializeApp","theme","Item","padding","width","height","UserOutlined","LaptopOutlined","NotificationOutlined","minHeight","path","pageTitle","textAlign","promise","Promise","all","ReactDOM","StrictMode","basename","process","getElementById"],"mappings":"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","file":"static/js/main.27f34004.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1GGgj\",\"login__block\":\"Header_login__block__1B7di\"};","const subcribers = {\r\n    'messages-received': [] as MessagesReceivedSubscriberType[],\r\n    'status-changed': [] as StatusChangedSubscriberType[]\r\n}\r\n\r\nlet ws: WebSocket | null = null\r\ntype EventsNamesType = 'messages-received' | 'status-changed'\r\n\r\nconst closeHandler = () => {\r\n    notifySubscribersAboutStatus('pending')\r\n    setTimeout(createChannel, 3000)\r\n}\r\nconst messageHandler = (e: MessageEvent) => {\r\n    const newMessages = JSON.parse(e.data)\r\n    subcribers['messages-received'].forEach(s => s(newMessages))\r\n}\r\nconst openHandler = () => {\r\n    notifySubscribersAboutStatus('ready')\r\n}\r\nconst errorHandler = () => {\r\n    notifySubscribersAboutStatus('error')\r\n    console.error('REFRESH PAGE')\r\n}\r\nconst cleanUp = () => {\r\n    ws?.removeEventListener('close', closeHandler)\r\n    ws?.removeEventListener('message', messageHandler)\r\n    ws?.removeEventListener('open', openHandler)\r\n    ws?.removeEventListener('error', errorHandler)\r\n}\r\nconst notifySubscribersAboutStatus = (status: StatusType) => {\r\n    subcribers['status-changed'].forEach(s => s(status))\r\n}\r\n\r\nfunction createChannel() {\r\n    cleanUp()\r\n    ws?.close()\r\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n    notifySubscribersAboutStatus('pending')\r\n    ws.addEventListener('close', closeHandler)\r\n    ws.addEventListener('message', messageHandler)\r\n    ws.addEventListener('open', openHandler)\r\n    ws.addEventListener('error', errorHandler)\r\n}\r\n\r\n\r\nexport const chatAPI = {\r\n    start() {\r\n        createChannel()\r\n    },\r\n    stop() {\r\n        subcribers['messages-received'] = []\r\n        subcribers['status-changed'] = []\r\n        cleanUp()\r\n        ws?.close()\r\n    },\r\n    subscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subcribers[eventName].push(callback)\r\n        return () => {\r\n            // @ts-ignore\r\n            subcribers[eventName] = subcribers[eventName].filter(s => s !== callback)\r\n        }\r\n    },\r\n    unsubscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subcribers[eventName] = subcribers[eventName].filter(s => s !== callback)\r\n    },\r\n    sendMessage(message: string) {\r\n        ws?.send(message)\r\n    }\r\n}\r\n\r\ntype MessagesReceivedSubscriberType = (messages: ChatMessageAPIType[]) => void\r\ntype StatusChangedSubscriberType = (status: StatusType) => void\r\n\r\nexport type ChatMessageAPIType = {\r\n    message: string\r\n    photo: string\r\n    userId: number\r\n    userName: string\r\n}\r\nexport type StatusType = 'pending' | 'ready' | 'error'\r\n","//@ts-ignore\r\nimport { v1 } from 'uuid';\r\nimport { ResultCodeForCaptchaEnum, ResultCodesEnum } from '../api/api'\r\nimport { authAPI } from '../api/auth-api'\r\nimport { securityAPI } from '../api/security-api'\r\nimport { BaseThunkType, InferActionTypes } from './redux-store'\r\nimport { Action, Dispatch } from 'redux'\r\nimport { chatAPI, ChatMessageAPIType, StatusType } from '../api/chat-api'\r\n\r\n\r\ntype ChatMessageType = ChatMessageAPIType & { id: string }\r\n\r\nlet initialState = {\r\n    messages: [] as ChatMessageType[],\r\n    status: 'pending' as StatusType\r\n}\r\n\r\nconst chatReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SN/chat/MESSAGES_RECEVIED':\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, ...action.payload.messages.map(m => ({ ...m, id: v1() }))]\r\n                    .filter((m, index, array) => index >= array.length - 100)\r\n            }\r\n        case 'SN/chat/STATUS_CHANGED':\r\n            return {\r\n                ...state,\r\n                status: action.payload.status\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    messagesReceived: (messages: ChatMessageAPIType[]) => ({\r\n        type: 'SN/chat/MESSAGES_RECEVIED', payload: { messages }\r\n    } as const),\r\n    statusChanged: (status: StatusType) => ({\r\n        type: 'SN/chat/STATUS_CHANGED', payload: { status }\r\n    } as const)\r\n}\r\n\r\nlet _newMessageHandler: ((messages: ChatMessageAPIType[]) => void) | null = null\r\nconst newMessageHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_newMessageHandler === null) {\r\n        _newMessageHandler = (messages) => {\r\n            dispatch(actions.messagesReceived(messages))\r\n        }\r\n    }\r\n    return _newMessageHandler\r\n}\r\n\r\nlet _statusChangedHandler: ((status: StatusType) => void) | null = null\r\nconst statusChangedHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_statusChangedHandler === null) {\r\n        _statusChangedHandler = (status) => {\r\n            dispatch(actions.statusChanged(status))\r\n        }\r\n    }\r\n    return _statusChangedHandler\r\n}\r\n\r\nexport const startMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.start()\r\n    chatAPI.subscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n    chatAPI.subscribe('status-changed', statusChangedHandlerCreator(dispatch))\r\n\r\n}\r\nexport const stopMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.unsubscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n    chatAPI.unsubscribe('status-changed', statusChangedHandlerCreator(dispatch))\r\n    chatAPI.stop()\r\n}\r\n\r\nexport const sendMessage = (message: string): ThunkType => async (dispatch) => {\r\n    chatAPI.sendMessage(message)\r\n}\r\n\r\n\r\nexport default chatReducer\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType>\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selected\":\"Music_selected__4x4ND\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notes__post\":\"NotesPost_notes__post__3aNrg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wpapperGif\":\"Preloader_wpapperGif__pCb4x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pad\":\"Profile_pad__1cBfN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"ProfileInfo_image__UbiZa\",\"discriptionBlock\":\"ProfileInfo_discriptionBlock__2Zfws\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__2HPe9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nameChat\":\"DialogItem_nameChat__1Vj6G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__xTsZN\"};","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import axios, { AxiosResponse } from 'axios';\r\n\r\nexport const instance = axios.create({\r\n\twithCredentials: true,\r\n\tbaseURL:'https://social-network.samuraijs.com/api/1.0/',\r\n\theaders: {\r\n\t\t\"API-KEY\": \"70e8e5ed-ff03-4d7b-b77d-74a34aff6348\"\r\n\t}\r\n})\r\nexport enum ResultCodeForCaptchaEnum {\r\n\tCaptchaIsRequired = 10\r\n}\r\n\r\n\r\nexport enum ResultCodesEnum {\r\n\tSuccess = 0,\r\n\tError = 1\r\n}\r\n\r\nexport type ResponseType<D = {}, RC = ResultCodesEnum> = {//  он не точен, его нужно будет уточнить по умолчан d равен пустому типу\r\n\tdata: D // generic тип D data\r\n\tmessages: Array<string>\r\n\tresultCode: RC // какой то result code тип\r\n\t\r\n}","import { ResultCodesEnum, ResultCodeForCaptchaEnum, instance, ResponseType } from './api';\r\ntype checksLoginResponseDataTypes = {\r\n\tid: number\r\n\temail: string\r\n\tlogin: string\r\n}\r\n\r\ntype loginResponseTypes = {\r\n\tuserId: number\r\n}\r\n\r\nexport const authAPI = {\r\n\tchecksLogin() {\r\n\t\treturn instance.get<ResponseType<checksLoginResponseDataTypes>>('auth/me').then(res => res.data)// возвращает промис и мы его ретурним // когда мы делаем запрос мы ожидаем получить тип\r\n\t},\r\n\tlogin(email: string, password: string, rememberMe: boolean = false, captcha: null | string = null) {\r\n\t\treturn instance.post<ResponseType<loginResponseTypes, ResultCodesEnum | ResultCodeForCaptchaEnum>>('auth/login', { email, password, rememberMe, captcha }).then(res => res.data)\r\n\t},\r\n\tlogout() {\r\n\t\treturn instance.delete('auth/login')\r\n\t}\r\n}","import { instance } from './api';\r\ntype getCaptchaTypes = {\r\n\turl: string\r\n}\r\n\r\nexport const securityAPI = {\r\n\tgetCaptcha() {\r\n\t\treturn instance.get<getCaptchaTypes>('security/get-captcha-url').then(res => res.data)\r\n\t}\r\n}","import { authAPI } from './../api/auth-api';\r\nimport { usersAPI } from './../api/user-api';\r\nimport { Dispatch } from \"redux\";\r\nimport { ThunkAction } from \"redux-thunk\";\r\nimport { ResultCodesEnum, ResultCodeForCaptchaEnum } from \"../api/api\";\r\nimport { AppStateType, BaseThunkType, InferActionTypes } from \"./redux-store\";\r\nimport { securityAPI } from '../api/security-api';\r\n\r\n\r\nlet initialState = {\r\n\tid: null as number | null, // воспринимай null как\r\n\tlogin: null as string | null,\r\n\temail: null as string | null,\r\n\tisAuth: false,\r\n\tisWrong: false,\r\n\tcaptchaUrl: null as string | null\r\n};\r\n\r\nexport type InitialStateType = typeof initialState; // TS определи сам тип этого initialState и создай его динамически на лету.\r\n\r\nconst authReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase 'auth/SET_USER_DATA':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload,\r\n\t\t\t}\r\n\t\tcase 'auth/SET_ERROR_WRONG':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisWrong: action.data.isWrong\r\n\t\t\t}\r\n\t\tcase 'auth/GET_CHAPTCHA_URL_SUCCESS':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcaptchaUrl: action.payload.captchaUrl\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\ntype ActionsTypes = InferActionTypes<typeof actions>\r\n\r\n\r\nexport const actions = {\r\n\tsetAuthUserData: (id: number | null, login: string | null, email: string | null, isAuth: boolean) => ({ type: 'auth/SET_USER_DATA', payload: { id, login, email, isAuth } } as const),\r\n\tgetCaptchaUrlSuccess: (captchaUrl: string) => ({ type: 'auth/GET_CHAPTCHA_URL_SUCCESS', payload: { captchaUrl } } as const),\r\n\tsetErrorWrong: (isWrong: boolean) => ({ type: 'auth/SET_ERROR_WRONG', data: { isWrong } } as const)\r\n}\r\n\r\ntype DispatchType = Dispatch<ActionsTypes>\r\ntype ThunkType = BaseThunkType<ActionsTypes>\r\n\r\nexport const getAuthUserData = ():ThunkType => async (dispatch) => {//для замыкания что бы thunk мог достучаться до данных переданных в getUsersThunkCreator\r\n\tlet checksLoginData = await authAPI.checksLogin();// дожидаемся именно промиса В респонсе будет сидеть результат которым зарезолвится промис \r\n\tif (checksLoginData.resultCode === ResultCodesEnum.Success) {\r\n\t\tlet { id, login, email } = checksLoginData.data\r\n\t\tdispatch(actions.setAuthUserData(id, login, email, true));\r\n\t}\r\n}\r\n\r\n\r\nexport const loginTC = (email: string, password: string, rememberMe: boolean, captcha: string):ThunkType => async (dispatch) => {//!!! captcha any\r\n\tlet loginData = await authAPI.login(email, password, rememberMe, captcha);\r\n\tif (loginData.resultCode === 0) {\r\n\t\tdispatch(getAuthUserData());\r\n\t\tdispatch(actions.setErrorWrong(false));\r\n\t} else if (loginData.resultCode === ResultCodeForCaptchaEnum.CaptchaIsRequired) {\r\n\t\tdispatch(getCaptchaUrl());\r\n\t}\r\n\telse {\r\n\t\tdispatch(actions.setErrorWrong(true));\r\n\t}\r\n}\r\n\r\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\r\n\tlet captchaData = await securityAPI.getCaptcha();\r\n\tconst captchaUrl = captchaData.url;\r\n\tdispatch(actions.getCaptchaUrlSuccess(captchaUrl));\r\n}\r\n\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n\tlet response = await authAPI.logout()\r\n\tif (response.data.resultCode === ResultCodesEnum.Success) {\r\n\t\tdispatch(actions.setAuthUserData(null, null, null, false));\r\n\t}\r\n}\r\n\r\nexport default authReducer;","import { getAuthUserData } from \"./auth-reducer\";\r\nimport { InferActionTypes } from \"./redux-store\";\r\n//const INITIALIZED_SUCCESS = 'auth/INITIALIZED_SUCCES'; В  TS можем избавиться от констант поместив в case и добавив as const в actions{}\r\n\r\n\r\n\r\nlet initialState = {\r\n\tinitialized: false\r\n}\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst appReducer = (state = initialState, action: ActionsTypes): InitialStateType => { // func получает и возвращает InitialStateType\r\n\tswitch (action.type) {\r\n\t\tcase 'auth/INITIALIZED_SUCCES':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tinitialized: true\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\ntype ActionsTypes = InferActionTypes<typeof actions>\r\n\r\n\r\n\r\nexport const actions = {\r\n\tinitializedSuccess: () => ({ type: 'auth/INITIALIZED_SUCCES' } as const)\r\n}\r\n\r\n\r\n//! Хрень какая то как getAuthUserData()  решение 10 видео 1:13:45 нет там решения... короче хз как в видео это не сделали\r\n\r\nexport const initializeApp = () => {\r\n\treturn (dispatch:any) => {\r\n\t\tlet promise = dispatch(getAuthUserData());// вернули промис из auth-reducer\r\n\t\tPromise.all([promise]).then(() => {// если несколько \r\n\t\t\tdispatch(actions.initializedSuccess());\r\n\t\t});\r\n\t\t\r\n\t}\r\n}\r\n\r\nexport default appReducer;","import { InferActionTypes } from \"./redux-store\";\r\n\r\n export type DialogType = {\r\n\tid: number\r\n\tname: string\r\n}\r\n\r\nexport type MessageType = {\r\n\tid: number\r\n\tmessage: string\r\n}\r\n\r\nlet initialState = {\r\n\tdialogs: [\r\n\t\t{ id: 1, name: 'Ivan' },\r\n\t\t{ id: 2, name: 'Alex' },\r\n\t\t{ id: 3, name: 'Kesha' },\r\n\t\t{ id: 4, name: 'Dino' }\r\n\t] as Array<DialogType>,\r\n\tmessages: [\r\n\t\t{ id: 1, message: 'What you name?' },\r\n\t\t{ id: 2, message: 'Tony' },\r\n\t\t{ id: 3, message: 'Fack you Tony!' },\r\n\t\t{ id: 4, message: 'What you name?' }\r\n\t] as Array<MessageType>,\r\n};\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst dialogsReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase 'dialogs/UPDATE-NEW-MESSAGE-TEXT':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmessages: [...state.messages, { id: 5, message: action.newMessage }]\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\ntype ActionsTypes = InferActionTypes<typeof actions>\r\n\r\nexport const actions = {\r\n\taddMessage: (message: string) => ({ type: 'dialogs/UPDATE-NEW-MESSAGE-TEXT', newMessage: message } as const)\r\n}\r\n\r\nexport default dialogsReducer;\r\n\r\n\r\n","import { InferActionTypes } from \"./redux-store\";\r\n\r\nexport type NoteType = {\r\n\tid: number\r\n\tnote: string\r\n}\r\n\r\nlet initialState = {\r\n\tnote: [\r\n\t\t{ id: 1, note: 'First note' },\r\n\t\t{ id: 2, note: 'Second note' },\r\n\t\t{ id: 3, note: 'Fack you Tony!' },\r\n\t\t{ id: 4, note: 'What you name?' }\r\n\t] as Array<NoteType>,\r\n\tnewNoteText: ''\r\n};\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst noteReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase 'note/ADD-NOTE': {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnote: [...state.note, { id: 5, note: state.newNoteText }],\r\n\t\t\t\tnewNoteText: ''\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase 'note/UPDATE-NEW-NOTE-TEXT': {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnewNoteText: action.newText\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\ntype ActionsTypes = InferActionTypes<typeof actions>\r\n\r\n\r\nexport const actions = {\r\n\taddNoteActionCreator: () => ({ type: 'note/ADD-NOTE' } as const),\r\n\tupdateNewNoteTextActionCreator: (textInputTextarea: string) => ({ type: 'note/UPDATE-NEW-NOTE-TEXT', newText: textInputTextarea } as const)\r\n}\r\n\r\nexport default noteReducer;","import { ProfileType, PhotosType } from './../types/types';\r\nimport { ResultCodesEnum, instance, ResponseType } from './api';\r\n\r\n\r\n\r\ntype SavePhototype = {\r\n\tphoto: PhotosType\r\n}\r\n\r\n\r\n\r\nexport const profileAPI = {\r\n\tgetUserProfile(userId: number | null) {\r\n\t\treturn instance.get<ProfileType>(`profile/${userId}`).then(res => res.data)\r\n\t},\r\n\tgetStatus(id: number) {\r\n\t\treturn instance.get<string>(`profile/status/${id}`).then(res => res.data)\r\n\t},\r\n\tupdateStatus(newStatusText: string) {\r\n\t\treturn instance.put<ResponseType>(`profile/status`, { status: newStatusText }).then(res => res.data)\r\n\t},\r\n\tsavePhoto(photoFile: any) {\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append('image', photoFile)\r\n\t\treturn instance.put<ResponseType<SavePhototype>>(`profile/photo`, formData, {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t}).then(res => res.data)\r\n\t},\r\n\tsaveProfile(profile: ProfileType) {\r\n\t\treturn instance.put<ResponseType>(`profile`, profile).then(res => res.data)\r\n\t}\r\n}","\r\nimport { AppStateType, InferActionTypes } from './redux-store';\r\nimport { PostType, ProfileType, ContactsType, PhotosType } from './../types/types';\r\nimport { ResultCodesEnum } from \"../api/api\";\r\nimport { Dispatch } from 'redux';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { profileAPI } from '../api/profile-api';\r\n\r\nlet initialState = {\r\n\tposts: [\r\n\t\t{ id: 1, message: 'Hi, how a you?', likesCount: 15 },\r\n\t\t{ id: 2, message: 'Its my first post!', likesCount: 2 }\r\n\t] as Array<PostType> ,\r\n\tprofile: null as ProfileType | null,\r\n\tnewStatusText: '-----'\r\n};\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst profileReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase 'profile/ADD-POST': {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: [...state.posts, { id: 5, message: action.newPost, likesCount: 0 }],\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase 'profile/SET_USER_PROFILE': {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tprofile: action.profile\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase 'profile/SET_STATUS_TEXT': {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnewStatusText: action.statusText\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase 'profile/SAVE_PHOTO_SUCCESS': {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tprofile: {...state.profile, photos: action.photos} as ProfileType //! временно\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase 'profile/DELETE_POST': {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: state.posts.filter(p => p.id != action.postId)\r\n\t\t\t};\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\ntype ActionsTypes = InferActionTypes<typeof actions>\r\n\r\nexport const actions = {\r\n\taddPost: (post: string) => ({ type: 'profile/ADD-POST', newPost: post } as const),\r\n\tsetUserProfile: (profile: ProfileType) => ({ type: 'profile/SET_USER_PROFILE', profile } as const),\r\n\tsavePhotoSuccess: (photos: PhotosType) => ({ type: 'profile/SAVE_PHOTO_SUCCESS', photos } as const),\r\n\tsetNewMessageTextStatus: (statusText: string) => ({ type: 'profile/SET_STATUS_TEXT', statusText: statusText } as const),\r\n\tdeletePost: (postId: number) => ({ type: 'profile/DELETE_POST', postId } as const)\r\n}\r\n\r\ntype DispatchType = Dispatch<ActionsTypes>\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ActionsTypes>\r\n\r\nexport const getUserProfileThunkCreator = (userId: number | null): ThunkType => async (dispatch) => { //для замыкания что бы thunk мог достучаться до данных переданных в getUsersThunkCreator\r\n\tlet userProfileData = await profileAPI.getUserProfile(userId);\r\n\tdispatch(actions.setUserProfile(userProfileData));\r\n}\r\n\r\nexport const getStatusThuncCreator = (id: number): ThunkType => async (dispatch) => {\r\n\tlet getStatusData = await profileAPI.getStatus(id);\r\n\tdispatch(actions.setNewMessageTextStatus(getStatusData));\r\n}\r\n\r\nexport const updateTextStatusThuncCreator = (newStatusText: string): ThunkType => async (dispatch) => {\r\n\tlet updateStatusData = await profileAPI.updateStatus(newStatusText);\r\n\tif (updateStatusData.resultCode === ResultCodesEnum.Success) {\r\n\t\tdispatch(actions.setNewMessageTextStatus(newStatusText));\r\n\t}\r\n}\r\n\r\nexport const savePhoto = (file: File): ThunkType => async (dispatch) => {\r\n\tlet savePhotoData = await profileAPI.savePhoto(file);\r\n\tif (savePhotoData.resultCode === 0) {\r\n\t\tdispatch(actions.savePhotoSuccess(savePhotoData.data.photo));\r\n\t}\r\n}\r\n\r\nexport const saveProfile = (profile: ProfileType): ThunkType => async (dispatch, getState) => {//?берем из стейта то, что нам нужно. Не запрещено\r\n\tconst userId = getState().auth.id;\r\n\tlet saveProfileData = await profileAPI.saveProfile(profile);\r\n\tif (saveProfileData.resultCode === ResultCodesEnum.Success) {\r\n\t\tdispatch(getUserProfileThunkCreator(userId))  \r\n\t} else {\r\n\t\t//dispatch(setErrorWrong(true));//! Нужно реализовать отображение ошибки!\r\n\t}\r\n}\r\n\r\n\r\nexport default profileReducer;","export type FriendsType = {\r\n\tid: number\r\n\tname: string\r\n}\r\n\r\nlet initialState = {\r\n\tfriends: [\r\n\t\t{ id: 1, name: 'Alex' },\r\n\t\t{ id: 2, name: 'Kesha' },\r\n\t\t{ id: 3, name: 'Dino' },\r\n\t] as Array<FriendsType>\r\n};\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst sidebarReducer = (state = initialState, action: any): InitialStateType => {\r\n\treturn state;\r\n}\r\n\r\nexport default sidebarReducer;","import { UsersType } from './../types/types';\r\nimport { instance, ResponseType } from './api';\r\n\r\ntype GetItemsType = {\r\n\titems: Array<UsersType>\r\n\ttotalCount: number\r\n\terror: string | null\r\n}\r\n\r\n\r\n\r\nexport const usersAPI = {//вспомагательный объект который содержит методы(набор)\r\n\tgetUsers(currentPage: number, pageSize: number, term: string = '', friend: null | boolean = null) {\r\n\t\treturn instance.get<GetItemsType>(`users?page=${currentPage}&count=${pageSize}&term=${term}` + (friend === null ? '' : `&friend=${friend}`))\r\n\t\t\t.then(response => {\r\n\t\t\t\treturn response.data;//возвращаем только data(инкапсулируем)\r\n\t\t\t})\r\n\t},\r\n\tsetFollow(id: number) {\r\n\t\treturn instance.post<ResponseType>(`follow/${id}`).then(res => res.data)\r\n\t},\r\n\tsetUnfollow(id: number) {\r\n\t\treturn instance.delete<ResponseType>(`follow/${id}`).then(res => res.data)\r\n\t},\r\n}","import { ResponseType } from './../api/api';\r\nimport { AppStateType, InferActionTypes, BaseThunkType } from './redux-store';\r\nimport { PhotosType, UsersType } from './../types/types';\r\nimport { Dispatch } from 'redux';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { usersAPI } from '../api/user-api';\r\n\r\nconst FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SET_USERS = 'users/SET_USERS';\r\nconst SET_CURRENT_PAGE = 'users/SET_CURRENT_PAGE';\r\nconst SET_PAGE_SIZE = 'users/SET_PAGE_SIZE';\r\nconst SET_COUNT_ALL_USERS = 'users/SET_COUNT_ALL_USERS';\r\nconst TOGGLE_IS_FETCHING = 'users/TOGGLE_IS_FETCHING';\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'users/TOGGLE_IS_FOLLOWING_PROGRESS';\r\nconst SET_FILTER = 'users/SET_FILTER;'\r\n\r\n\r\nlet initialState = {\r\n\tusers: [] as Array<UsersType>,\r\n\tpageSize: 10,\r\n\ttotalUserCount: 1,\r\n\tcurrentPage: 1,\r\n\tisFetching: true,\r\n\tfollowingInProgress: false,\r\n\tfilter: {\r\n\t\tterm: '',\r\n\t\tfriend: null as null | boolean\r\n\t}\r\n};\r\n\r\nexport type InitialStateType = typeof initialState\r\nexport type FilterType = typeof initialState.filter\r\n\r\nconst usersReducer = (state = initialState, action: ActionsTypes): InitialStateType => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_USERS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: action.users\r\n\t\t\t}\r\n\t\tcase FOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: state.users.map((u) => u.id === action.userId ? { ...u, followed: true } : u)\r\n\t\t\t}\r\n\t\tcase UNFOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: state.users.map((u) => u.id === action.userId ? { ...u, followed: false } : u)\r\n\t\t\t}\r\n\t\tcase SET_CURRENT_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcurrentPage: action.currentPage\r\n\t\t\t}\r\n\t\tcase SET_COUNT_ALL_USERS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttotalUserCount: action.countAllUsers\r\n\t\t\t}\r\n\t\tcase SET_PAGE_SIZE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpageSize: action.pageSize\r\n\t\t\t}\r\n\t\tcase TOGGLE_IS_FETCHING:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisFetching: action.isFetching\r\n\t\t\t}\r\n\t\tcase TOGGLE_IS_FOLLOWING_PROGRESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tfollowingInProgress: action.isFetching\r\n\t\t\t}\r\n\t\tcase SET_FILTER:\r\n\t\t\treturn { ...state, filter: action.payload }\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\ntype ActionsTypes = InferActionTypes<typeof actions>\r\n\r\nexport const actions = {\r\n\tsetFilter: (filter: FilterType) => ({ type: SET_FILTER, payload: filter } as const),\r\n\tfollowSucsess: (userId: number) => ({ type: FOLLOW, userId } as const),\r\n\tunfollowSucsess: (userId: number) => ({ type: UNFOLLOW, userId } as const),\r\n\tsetUsers: (users: Array<UsersType>) => ({ type: SET_USERS, users } as const),\r\n\tsetCurrentPage: (currentPage: number) => ({ type: SET_CURRENT_PAGE, currentPage } as const),\r\n\tsetPageSize: (pageSize: number) => ({ type: SET_PAGE_SIZE, pageSize } as const),\r\n\tsetCountAllUsers: (countAllUsers: number) => ({ type: SET_COUNT_ALL_USERS, countAllUsers } as const),\r\n\ttoggleIsFetching: (isFetching: boolean) => ({ type: TOGGLE_IS_FETCHING, isFetching } as const),\r\n\ttoggleFollowingProgress: (isFetching: boolean) => ({ type: TOGGLE_IS_FOLLOWING_PROGRESS, isFetching } as const)\r\n}\r\n\r\n\r\ntype DispatchType = Dispatch<ActionsTypes>\r\ntype ThunkType = BaseThunkType<ActionsTypes>\r\n\r\nexport const getUsersThunkCreator = (currentPage: number, pageSize: number, filter: FilterType): ThunkType => async (dispatch, getState) => {//для замыкания что бы thunk мог достучаться до данных переданных в getUsersThunkCreator\r\n\tdispatch(actions.toggleIsFetching(true));\r\n\tdispatch(actions.setFilter(filter));\r\n\tdispatch(actions.setCurrentPage(currentPage));\r\n\tlet data = await usersAPI.getUsers(currentPage, pageSize, filter.term, filter.friend);\r\n\tdispatch(actions.toggleIsFetching(false));\r\n\tdispatch(actions.setUsers(data.items));\r\n\tdispatch(actions.setCountAllUsers(data.totalCount));\r\n}\r\n\r\nexport const getUsersOnPageSize = (pageNumber: number, pageSize: number): ThunkType => async (dispatch) => {\r\n\tdispatch(actions.setPageSize(pageSize));\r\n\tdispatch(actions.toggleIsFetching(true));\r\n\tlet data = await usersAPI.getUsers(pageNumber, pageSize);\r\n\tdispatch(actions.setUsers(data.items));\r\n\tdispatch(actions.toggleIsFetching(false));\r\n}\r\n\r\nexport const getUsersOnPagechangedThunkCreator = (pageNumber: number, pageSize: number): ThunkType => async (dispatch) => {\r\n\tdispatch(actions.setCurrentPage(pageNumber));\r\n\tdispatch(actions.toggleIsFetching(true));\r\n\tlet data = await usersAPI.getUsers(pageNumber, pageSize);\r\n\tdispatch(actions.setUsers(data.items));\r\n\tdispatch(actions.toggleIsFetching(false));\r\n}\r\n\r\nconst followUnfollowFlow = async (dispatch: DispatchType, userId: number, apiMethod: (userId: number) => Promise<ResponseType>, actionCreator: (userId: number) => ActionsTypes ) => {\r\n\tdispatch(actions.toggleFollowingProgress(true));\r\n\tlet response = await apiMethod(userId);\r\n\tif (response.resultCode === 0) {\r\n\t\tdispatch(actionCreator(userId));\r\n\t}\r\n\tdispatch(actions.toggleFollowingProgress(false));\r\n}\r\n\r\nexport const follow = (userId: number): ThunkType => async (dispatch) => {\r\n\tawait followUnfollowFlow(dispatch, userId, usersAPI.setFollow.bind(usersAPI), actions.followSucsess)\r\n}\r\nexport const unfollow = (userId: number): ThunkType => async (dispatch) => {\r\n\tawait followUnfollowFlow(dispatch, userId, usersAPI.setUnfollow.bind(usersAPI), actions.unfollowSucsess)\r\n}\r\n\r\n\r\nexport default usersReducer;","import { Action, applyMiddleware, combineReducers, compose, createStore } from \"redux\";\r\nimport thunkMiddleware, { ThunkAction } from \"redux-thunk\";\r\nimport appReducer from \"./appReducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport chatReducer from \"./chat-reducer\";\r\nimport dialogsReducer from \"./dialogsReducer\";\r\nimport noteReducer from \"./noteReducer\";\r\nimport profileReducer from \"./profileReducer\";\r\nimport sidebarReducer from \"./sidebarReducer\";\r\nimport usersReducer from \"./usersReducer\";\r\n\r\nlet rootReducer = combineReducers({\r\n\tprofilePage: profileReducer,\r\n\tdialogsPage: dialogsReducer,\r\n\tsidebar: sidebarReducer,\r\n\tnote: noteReducer,\r\n\tusersPage: usersReducer,\r\n\tapp: appReducer,\r\n\tauth: authReducer,\r\n\tchat: chatReducer\r\n});\r\n\r\ntype RootReducerType = typeof rootReducer;\r\nexport type AppStateType = ReturnType<RootReducerType> // спец команда TS\r\n\r\n\r\n\r\n/* type PropertiesTypes<T> = T extends {[key: string]: infer U} ? U : never\r\nexport  type InferActionTypes<T extends {[key: string]: (...arg: any[])=>any}> = ReturnType<PropertiesTypes<T>> */\r\nexport  type InferActionTypes<T> = T extends {[key: string]: (...arg: any[])=> infer U } ? U : never// для reducer\r\n\r\n\r\nexport type BaseThunkType<A extends Action, R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>// вынесли вверх\r\n\r\n\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nlet store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\nexport default store;\r\n","import React from \"react\";\r\nimport s from './Settings.module.css';\r\n\r\nconst Settings = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tSettings\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default Settings;","import React from \"react\";\r\n\r\nclass ProductCategoryRow extends React.Component {\r\n\trender() {\r\n\t\tconst category = this.props.category;\r\n\t\treturn (\r\n\t\t\t<tr>\r\n\t\t\t\t<th colSpan=\"2\">\r\n\t\t\t\t\t{category}\r\n\t\t\t\t</th>\r\n\t\t\t</tr>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass ProductRow extends React.Component {\r\n\trender() {\r\n\t\tconst product = this.props.product;\r\n\t\tconst name = product.stocked ?\r\n\t\t\tproduct.name :\r\n\t\t\t<span style={{ color: 'red' }}>\r\n\t\t\t\t{product.name}\r\n\t\t\t</span>;\r\n\r\n\t\treturn (\r\n\t\t\t<tr>\r\n\t\t\t\t<td>{name}</td>\r\n\t\t\t\t<td>{product.price}</td>\r\n\t\t\t</tr>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass ProductTable extends React.Component {\r\n\trender() {\r\n\t\tconst filterText = this.props.filterText;\r\n\t\tconst inStockOnly = this.props.inStockOnly;\r\n\r\n\t\tconst rows = [];\r\n\t\tlet lastCategory = null;\r\n\r\n\t\tthis.props.products.forEach((product) => {\r\n\t\t\tif (product.name.indexOf(filterText) === -1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (inStockOnly && !product.stocked) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (product.category !== lastCategory) {\r\n\t\t\t\trows.push(\r\n\t\t\t\t\t<ProductCategoryRow\r\n\t\t\t\t\t\tcategory={product.category}\r\n\t\t\t\t\t\tkey={product.category} />\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\trows.push(\r\n\t\t\t\t<ProductRow\r\n\t\t\t\t\tproduct={product}\r\n\t\t\t\t\tkey={product.name}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t\tlastCategory = product.category;\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<table>\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t\t<th>Price</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>{rows}</tbody>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</table>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass SearchBar extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.handleFilterTextChange = this.handleFilterTextChange.bind(this);\r\n\t\tthis.handleInStockChange = this.handleInStockChange.bind(this);\r\n\t}\r\n\r\n\thandleFilterTextChange(e) {\r\n\t\tthis.props.onFilterTextChange(e.target.value);\r\n\t}\r\n\r\n\thandleInStockChange(e) {\r\n\t\tthis.props.onInStockChange(e.target.checked);\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<form>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Search...\"\r\n\t\t\t\t\tvalue={this.props.filterText}\r\n\t\t\t\t\tonChange={this.handleFilterTextChange}\r\n\t\t\t\t/>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\tchecked={this.props.inStockOnly}\r\n\t\t\t\t\t\tonChange={this.handleInStockChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{' '}\r\n\t\t\t\t\tOnly show products in stock\r\n\t\t\t\t</p>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass FilterableProductTable extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfilterText: '',\r\n\t\t\tinStockOnly: false\r\n\t\t};\r\n\r\n\t\tthis.handleFilterTextChange = this.handleFilterTextChange.bind(this);\r\n\t\tthis.handleInStockChange = this.handleInStockChange.bind(this);\r\n\t}\r\n\r\n\thandleFilterTextChange(filterText) {\r\n\t\tthis.setState({\r\n\t\t\tfilterText: filterText\r\n\t\t});\r\n\t}\r\n\r\n\thandleInStockChange(inStockOnly) {\r\n\t\tthis.setState({\r\n\t\t\tinStockOnly: inStockOnly\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<MyContext.Consumer>\r\n\t\t\t\t\t{value => console.log(value)}\r\n\t\t\t\t</MyContext.Consumer>\r\n\t\t\t\t<SearchBar\r\n\t\t\t\t\tfilterText={this.state.filterText}\r\n\t\t\t\t\tinStockOnly={this.state.inStockOnly}\r\n\t\t\t\t\tonFilterTextChange={this.handleFilterTextChange}\r\n\t\t\t\t\tonInStockChange={this.handleInStockChange}\r\n\t\t\t\t/>\r\n\t\t\t\t<ProductTable\r\n\t\t\t\t\tproducts={this.props.products}\r\n\t\t\t\t\tfilterText={this.state.filterText}\r\n\t\t\t\t\tinStockOnly={this.state.inStockOnly}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass Test extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<MyContext.Provider value={'IvanZaharenko'}>\r\n\t\t\t\t<FilterableProductTable products={PRODUCTS} />\r\n\t\t\t</MyContext.Provider>\r\n\t\t\t\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst MyContext = React.createContext('IvanZaharenko');\r\n\r\nconst PRODUCTS = [\r\n\t{ category: 'Sporting Goods', price: '$49.99', stocked: true, name: 'Football' },\r\n\t{ category: 'Sporting Goods', price: '$9.99', stocked: true, name: 'Baseball' },\r\n\t{ category: 'Sporting Goods', price: '$29.99', stocked: false, name: 'Basketball' },\r\n\t{ category: 'Electronics', price: '$99.99', stocked: true, name: 'iPod Touch' },\r\n\t{ category: 'Electronics', price: '$399.99', stocked: false, name: 'iPhone 5' },\r\n\t{ category: 'Electronics', price: '$199.99', stocked: true, name: 'Nexus 7' }\r\n];\r\n\r\nexport default Test;","import React from \"react\";\r\nimport s from './News.module.css';\r\nimport Test from \"./test\";\r\n\r\nconst News: React.FC = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Test/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default News;","import { Col, Row } from \"antd\";\r\nimport axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport s from './Music.module.css';\r\n\r\nconst Music: React.FC = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Github />\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default Music;\r\n\r\n\r\ntype SearchUserType = {\r\n\tlogin: string\r\n\tid: number\r\n}\r\n\r\ntype SearchResult = {\r\n\titems: SearchUserType[]\r\n}\r\n\r\ntype UserType = {\r\n\tlogin: string\r\n\tid: number\r\n\tavatar_url: string\r\n\tfollowers: number\r\n}\r\n\r\nconst Github = () => {\r\n\tconst [selectedUser, setSelectedUser] = useState<SearchUserType | null>(null)\r\n\tconst initialSearchState = 'it'\r\n\tconst [searchTerm, setSearchTerm] = useState(initialSearchState)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (selectedUser) {\r\n\t\t\tdocument.title = selectedUser.login\r\n\t\t}\r\n\t}, [selectedUser])\r\n\r\n\treturn <div>\r\n\t\t<Row>\r\n\t\t\t<Col flex={1}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Search value={searchTerm} onSubmit={(value: string) => { setSearchTerm(value) }} />\r\n\t\t\t\t\t<button onClick={() => { setSearchTerm(initialSearchState) }}>reset</button>\r\n\t\t\t\t\t<UsersList searchTerm={searchTerm} selectedUser={selectedUser} onUserSelect={setSelectedUser} />\r\n\t\t\t\t</div>\r\n\t\t\t</Col>\r\n\t\t\t<Col flex={9}>\r\n\t\t\t\t<UserDetails selectedUser={selectedUser} />\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t</div>\r\n}\r\n\r\ntype SearchPropsType = {\r\n\tvalue: string\r\n\tonSubmit: (value: string) => void\r\n}\r\n\r\n\r\nconst Search: React.FC<SearchPropsType> = ({ onSubmit, value }) => {\r\n\tconst [tempSearch, setTempSearch] = useState(value)\r\n\r\n\tuseEffect(() => {// для синхронизации. Когда в родительск компоненте происходит сброс, дочерняя синхронизируется.\r\n\t\tsetTempSearch(value)\r\n\t}, [value])\r\n\r\n\treturn <div>\r\n\t\t<input placeholder=\"search\" value={tempSearch} onChange={(e) => { setTempSearch(e.currentTarget.value) }} />\r\n\t\t<button\r\n\t\t\tonClick={() => {\r\n\t\t\t\tonSubmit(tempSearch)\r\n\t\t\t}}\r\n\t\t>find</button>\r\n\t</div>\r\n}\r\n\r\ntype UserListPropsType = {\r\n\tsearchTerm: string\r\n\tselectedUser: SearchUserType | null\r\n\tonUserSelect: (user: SearchUserType) => void\r\n}\r\n\r\nconst UsersList: React.FC<UserListPropsType> = ({ searchTerm, selectedUser, onUserSelect }) => {\r\n\r\n\tconst [users, setUsers] = useState<SearchUserType[]>([])\r\n\r\n\tuseEffect(() => {\r\n\t\taxios\r\n\t\t\t.get<SearchResult>(`https://api.github.com/search/users?q=${searchTerm}`)\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetUsers(res.data.items)\r\n\t\t\t})\r\n\t}, [searchTerm])\r\n\r\n\treturn <div>\r\n\t\t<ul>\r\n\t\t\t{users.map(u => <li key={u.id} className={selectedUser === u ? s.selected : ''}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tonUserSelect(u)\r\n\t\t\t\t}}>\r\n\t\t\t\t{u.login}\r\n\t\t\t</li>)}\r\n\t\t</ul>\r\n\t</div>\r\n}\r\n\r\n\r\nconst START_TIMER_SECONDS = 10;\r\n\r\n\r\ntype TimerPropsType = {\r\n\tseconds: number\r\n\tonChange: (actualSeconds: number) => void\r\n\ttimerKey: string\r\n}\r\n\r\nconst Timer: React.FC<TimerPropsType> = ({ seconds, onChange, timerKey }) => {\r\n\r\n\tconst [timer, setTimer] = useState(seconds)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetTimer(seconds)\r\n\t}, [seconds])\r\n\r\n\tuseEffect(() => {\r\n\t\tonChange(timer)\r\n\t}, [timer])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst intervalId = setInterval(() => {\r\n\t\t\tsetTimer((prev) => prev - 1)\r\n\t\t}, 1000)// через prev получаем актуальный state обходя проблему замыкания\r\n\t\treturn () => { clearInterval(intervalId)}\r\n\t}, [timerKey])// делаем установку интервала\r\n\r\n\r\n\treturn <div>\r\n\t\t{timer}\r\n\t</div>\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\ntype PropsType = {\r\n\tselectedUser: SearchUserType | null\r\n}\r\n\r\nconst UserDetails: React.FC<PropsType> = ({ selectedUser }) => {\r\n\tconst [userDetails, setUserDetails] = useState<UserType | null>(null)\r\n\tconst [seconds, setSeconds] = useState(START_TIMER_SECONDS)\r\n\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!!selectedUser) {\r\n\t\t\taxios\r\n\t\t\t\t.get<UserType>(`https://api.github.com/users/${selectedUser.login}`)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tsetSeconds(START_TIMER_SECONDS)\r\n\t\t\t\t\tsetUserDetails(res.data)\r\n\t\t\t\t})\r\n\t\t}\r\n\t}, [selectedUser])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (seconds < 0) {\r\n\t\t\tsetUserDetails(null)// но таймер не умер, так как это асинхрон живущий в браузере. И происходит утечка памяти.\r\n\t\t}\r\n\t}, [seconds])\r\n\r\n\treturn <div>\r\n\r\n\t\t{userDetails && <div>\r\n\t\t\t<Timer seconds={seconds} onChange={setSeconds} timerKey={userDetails.id.toString()}/>\r\n\t\t\t<img src={userDetails.avatar_url} alt=\"\" />\r\n\t\t\t<br />\r\n\t\t\t<h2>Username</h2>\r\n\t\t\t{userDetails.login}, followers:{userDetails.followers}\r\n\t\t</div>}\r\n\t</div>\r\n}\r\n\r\n\r\n\r\n","import React from \"react\";\r\nimport s from './NotesPost.module.css';\r\n\r\ntype PropsType = {\r\n\tnote: string\r\n}\r\nconst NotesPost: React.FC<PropsType> = (props) => {\r\n\treturn (\r\n\t\t<div className={s.notes__post}>\r\n\t\t\t{props.note}\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default NotesPost;","import s from './Notes.module.css';\r\nimport NotesPost from './NotesPost/NotesPost';\r\nimport React from 'react';\r\nimport { NoteType } from '../../redux/noteReducer';\r\n\r\nexport type MapPropsType = {\r\n\tnewNoteText: string\r\n\tnotes: Array<NoteType>\r\n}\r\n\r\nexport type DispatchPropsType = {\r\n\taddNoteActionCreator: () => void\r\n\tupdateNewNoteTextActionCreator: (textInputTextarea: string) => void\r\n}\r\n\r\nconst Notes: React.FC<MapPropsType & DispatchPropsType> = (props) => {\r\n\tlet noteItem = props.notes.map((notesItem) => <NotesPost note={notesItem.note} key={notesItem.id} />)\r\n\r\n\r\n\tlet newNotesElement = React.createRef<HTMLTextAreaElement>();\r\n\r\nlet addNotes = () => {\r\n\tprops.addNoteActionCreator()\r\n\t}\r\n\r\n\tlet onNotesTextUpdate = () => {\r\n\t\tlet textInputTextarea = newNotesElement.current!.value;\r\n\t\tprops.updateNewNoteTextActionCreator(textInputTextarea);\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<div className={s.notes__wrapper}>\r\n\t\t\t<h2 className={s.notes__title}>My notes</h2>\r\n\t\t\t<div className={s.notes__visualBlock}>\r\n\t\t\t\t{noteItem}\r\n\t\t\t</div>\r\n\t\t\t<div className={s.notes__sendBlock}>\r\n\t\t\t\t<textarea  ref={newNotesElement} onChange={onNotesTextUpdate} value={props.newNoteText}></textarea>\r\n\t\t\t\t<button onClick={addNotes}>Send</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default Notes;","import s from './Notes.module.css';\r\nimport NotesPost from './NotesPost/NotesPost';\r\nimport React from 'react';\r\nimport { actions } from '../../redux/noteReducer';\r\nimport Notes, { DispatchPropsType, MapPropsType} from './Notes';\r\nimport { connect } from 'react-redux';\r\nimport { AppStateType } from '../../redux/redux-store';\r\n\r\nconst { addNoteActionCreator, updateNewNoteTextActionCreator } = actions\r\n\r\nconst mapStateToProps = (state: AppStateType) => {\r\n\treturn {\r\n\t\tnotes: state.note.note,\r\n\t\tnewNoteText: state.note.newNoteText\r\n\t}\r\n}\r\n\r\n\r\n\r\nconst NotesContainer = connect<MapPropsType, DispatchPropsType, {}, AppStateType>(mapStateToProps, { addNoteActionCreator, updateNewNoteTextActionCreator})(Notes)\r\n\r\nexport default NotesContainer;","export default __webpack_public_path__ + \"static/media/Circle-Loading.385f97b7.svg\";","import React from \"react\";\r\nimport preloader from '../../../assets/images/Circle-Loading.svg'\r\nimport s from './Preloader.module.css'\r\n\r\nlet Preloader: React.FC = (props) => {\r\n\treturn <div className={s.wpapperGif}>\r\n\t\t<img src={preloader} />\r\n\t</div>\r\n}\r\nexport default Preloader","import { AppStateType } from './redux-store';\r\nimport { createSelector } from \"reselect\";\r\n\r\nexport const getUsers = (state: AppStateType) => {\r\n\treturn state.usersPage.users;\r\n}\r\n\r\nexport const getUsersSuper = createSelector(getUsers, (users) => {\r\n\treturn users.filter(u => true);\r\n});\r\n\r\nexport const getPageSize = (state: AppStateType) => {\r\n\treturn state.usersPage.pageSize;\r\n}\r\n\r\nexport const getTotalUserCount = (state: AppStateType) => {\r\n\treturn state.usersPage.totalUserCount;\r\n}\r\n\r\nexport const getCurrentPage = (state: AppStateType) => {\r\n\treturn state.usersPage.currentPage;\r\n}\r\n\r\nexport const getIsFetching = (state: AppStateType) => {\r\n\treturn state.usersPage.isFetching;\r\n}\r\n\r\nexport const getFollowingInProgress = (state: AppStateType) => {\r\n\treturn state.usersPage.followingInProgress;\r\n}\r\n\r\nexport const getUsersFilter = (state: AppStateType) => {\r\n\treturn state.usersPage.filter;\r\n}","export default \"data:image/png;base64,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\"","import React from \"react\";\r\nimport s from './User.module.css'\r\nimport userPhoto from '../../assets/images/user.png';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { UsersType } from \"../../types/types\";\r\n\r\ntype PropsType = {\r\n\tuser: UsersType\r\n\tfollowingInProgress: boolean\r\n\tunfollow: (userId: number) => void\r\n\tfollow: (userId: number) => void\r\n}\r\n\r\nlet User: React.FC<PropsType> = ({ user, followingInProgress, unfollow, follow}) => {\r\n\treturn  (\r\n\t\t<div>\r\n\t\t\t<div className={s.user__wrapper}>\r\n\t\t\t\t<div className={s.user__leftBlock}>\r\n\t\t\t\t\t<div className={s.user__foto}>\r\n\t\t\t\t\t\t<NavLink to={`profile/${user.id}`}>\r\n\t\t\t\t\t\t\t<img src={user.photos.small ? user.photos.small : userPhoto} alt=\"photo_user\" />\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={s.user__button}>\r\n\t\t\t\t\t\t{user.followed\r\n\t\t\t\t\t\t\t? <button disabled={followingInProgress} onClick={() => {\r\n\t\t\t\t\t\t\t\tunfollow(user.id);\r\n\t\t\t\t\t\t\t}}>Unfollow</button>\r\n\t\t\t\t\t\t\t: <button disabled={followingInProgress} onClick={() => {\r\n\t\t\t\t\t\t\t\tfollow(user.id);\r\n\t\t\t\t\t\t\t}}>Follow</button>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.user__rightBlock}>\r\n\t\t\t\t\t<div className={s.user__name}>{user.name}</div>\r\n\t\t\t\t\t<div className={s.user__status}>\r\n\t\t\t\t\t\t{user.status}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={s.user__location}>\r\n\t\t\t\t\t\t<div className={s.user__locationCity}>\r\n\t\t\t\t\t\t\t{'user.location.city'}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={s.user__locationCountry}>\r\n\t\t\t\t\t\t\t{'user.location.country'}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default User;","import { Select } from \"antd\";\r\nimport React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getUsersFilter } from \"../../redux/users-selectors\";\r\nimport { FilterType } from \"../../redux/usersReducer\";\r\n\r\ntype PropsType = {\r\n\tonFilterChanged: (filter: FilterType) => void\r\n}\r\n\r\nconst UsersSearchForm: React.FC<PropsType> = React.memo((props) => {\r\n\t\r\n\tconst { register, setValue, handleSubmit, formState: { errors } } = useForm<FilterType>();\r\n\tconst onSubmit = handleSubmit(data => {\r\n\t\tprops.onFilterChanged(data)\r\n\t});\r\n\t\r\n\tconst filter = useSelector(getUsersFilter)\r\n\tsetValue('term', filter.term)\r\n\tsetValue('friend', filter.friend)\r\n\r\n\r\n\treturn <div>\r\n\t\t<form onSubmit={onSubmit}>\r\n\t\t\t<input {...register(\"term\"/* , { required: 'Field is requared' } */)} />\r\n\t\t\t<select {...register(\"friend\")}>\r\n\t\t\t\t<option value='null'>All</option>\r\n\t\t\t\t<option value='true'>Only followed</option>\r\n\t\t\t\t<option value='false'>Only unfolloewd</option>\r\n\t\t\t</select>\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tonClick={() => { onSubmit() }}\r\n\t\t\t>\r\n\t\t\t\tSearch\r\n\t\t\t</button>\r\n\t\t</form>\r\n\t</div>\r\n})\r\n\r\nexport default UsersSearchForm","import { Pagination } from \"antd\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getCurrentPage, getFollowingInProgress, getPageSize, getTotalUserCount, getUsersFilter, getUsersSuper } from \"../../redux/users-selectors\";\r\nimport { FilterType, getUsersOnPageSize, getUsersThunkCreator } from \"../../redux/usersReducer\";\r\nimport User from \"./User\";\r\nimport UsersSearchForm from \"./UsersSearchForm\";\r\nimport * as queryString from 'querystring'\r\n\r\n\r\ntype PropsType = {\r\n}\r\ntype QueryParamsType = { term?: string; page?: string; friend?: string }\r\n\r\nexport const Users: React.FC<PropsType> = (props) => {\r\n\r\n\tconst users = useSelector(getUsersSuper)\r\n\tconst totalUserCount = useSelector(getTotalUserCount)\r\n\tconst currentPage = useSelector(getCurrentPage)\r\n\tconst pageSize = useSelector(getPageSize)//const pageSize = useSelector((state) => state.usersPage.pageSize)\r\n\tconst filter = useSelector(getUsersFilter)\r\n\tconst followingInProgress = useSelector(getFollowingInProgress)\r\n\r\n\r\n\tconst dispatch = useDispatch()\r\n\tconst history = useHistory()\r\n\r\n\tuseEffect(() => {\r\n\t\tconst {search} = history.location;\r\n\t\tconst parsed = queryString.parse(search.substr(1)) as QueryParamsType\r\n\r\n\t\tlet actualPage = currentPage\r\n\t\tlet actualFilter = filter\r\n\r\n\t\tif (!!parsed.page) actualPage = Number(parsed.page)\r\n\r\n\r\n\t\tif (!!parsed.term) actualFilter = { ...actualFilter, term: parsed.term as string }\r\n\r\n\t\tswitch (parsed.friend) {\r\n\t\t\tcase \"null\":\r\n\t\t\t\tactualFilter = { ...actualFilter, friend: null }\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"true\":\r\n\t\t\t\tactualFilter = { ...actualFilter, friend: true }\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"false\":\r\n\t\t\t\tactualFilter = { ...actualFilter, friend: false }\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\tdispatch(getUsersThunkCreator(actualPage, pageSize, actualFilter))\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\t/* history.push({\r\n\t\t\tpathname: 'users',\r\n\t\t\tsearch: `?term=${filter.term}&friend=${filter.friend}&page=${currentPage}`\r\n\t\t}) */\r\n\t\tconst query: QueryParamsType = {}\r\n\r\n\t\tif (!!filter.term) query.term = filter.term\r\n\t\tif (filter.friend !== null) query.friend = String(filter.friend)\r\n\t\tif (currentPage !== 1) query.page = String(currentPage)\r\n\r\n\t\thistory.push({\r\n\t\t\tpathname: '/users',\r\n\t\t\tsearch: queryString.stringify(query)\r\n\t\t})\r\n\t}, [filter, currentPage]) // как только объект filter будет другой\r\n\r\n\tconst onPageSizeChange = (current: number, size: number) => {\r\n\t\tdispatch(getUsersOnPageSize(currentPage, size))\r\n\t}\r\n\r\n\tconst onPageChanged = (pageNumber: number) => {\r\n\t\tdispatch(getUsersThunkCreator(pageNumber, pageSize, filter))\r\n\t}\r\n\r\n\tconst onFilterChanged = (filter: FilterType) => {\r\n\t\tdispatch(getUsersThunkCreator(1, pageSize, filter))\r\n\t}\r\n\r\n\tconst follow = (userId: number) => {\r\n\t\tdispatch(follow(userId))\r\n\t}\r\n\r\n\tconst unfollow = (userId: number) => {\r\n\t\tdispatch(unfollow(userId))\r\n\t}\r\n\r\n\r\n\r\n\tfunction onChange(pageNumber: number) {\r\n\t\tonPageChanged(pageNumber)\r\n\t}\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<UsersSearchForm onFilterChanged={onFilterChanged} />\r\n\t\t\t<Pagination showQuickJumper defaultCurrent={1} total={totalUserCount} defaultPageSize={pageSize} onChange={onChange} onShowSizeChange={onPageSizeChange}/>\r\n\t\t\t{\r\n\t\t\t\tusers.map((u) => <User\r\n\t\t\t\t\tuser={u}\r\n\t\t\t\t\tfollowingInProgress={followingInProgress}\r\n\t\t\t\t\tkey={u.id}\r\n\t\t\t\t\tunfollow={unfollow}\r\n\t\t\t\t\tfollow={follow}\r\n\t\t\t\t/>)\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Preloader from '../common/Preloader/Preloader';\r\nimport { getIsFetching } from \"../../redux/users-selectors\";\r\nimport { Users } from \"./Users\";\r\n\r\n\r\n\r\ntype UsersPagePropsType = {\r\n\tpageTitle: string\r\n}\r\n\r\n\r\nexport const UsersPage: React.FC<UsersPagePropsType> = (props) => {\r\n\tconst isFetching = useSelector(getIsFetching)\r\n\r\n\treturn <>\r\n\t\t{isFetching ? <Preloader /> : null}\r\n\t\t<Users/>\r\n\t</>\r\n}\r\n","import React, { ChangeEvent, useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { compose } from \"redux\";\r\nimport { getStatusThuncCreator, updateTextStatusThuncCreator } from \"../../../redux/profileReducer\";\r\nimport { AppStateType } from \"../../../redux/redux-store\";\r\nimport s from './ProfileInfo.module.css';\r\n\r\n//todo избавиться от connect и перенести его в контейнер выше\r\n\r\ntype PropsType = {\r\n\tstatusText: string\r\n\tupdateTextStatusThuncCreator: (status: string) => void\r\n}\r\n\r\nconst ProfileStatusWithHooks: React.FC<PropsType> = (props) => {\r\n\tlet [editMode, setEditMode] = useState(false);\r\n\tlet [status, setStatus] = useState(props.statusText);\r\n\tuseEffect(() => {\r\n\t\tsetStatus(props.statusText)\r\n\t}, [props.statusText]);\r\n\r\n\tconst activateEditMode = () => {\r\n\t\tsetEditMode(true)\r\n\t}\r\n\r\n\tconst deactivateEditMode = () => {\r\n\t\tsetEditMode(false)\r\n\t\tprops.updateTextStatusThuncCreator(status);\r\n\t}\r\n\r\n\tconst onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tsetStatus(e.currentTarget.value);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{!editMode &&\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<span onClick={activateEditMode}>{props.statusText}</span>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t{editMode &&\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input onChange={onStatusChange} autoFocus={true} onBlur={deactivateEditMode} value={status} />\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state:AppStateType) => {\r\n\treturn ({\r\n\t\tstatusText: state.profilePage.newStatusText,\r\n\t})\r\n}\r\n\r\nexport default compose(\r\n\tconnect(mapStateToProps, { updateTextStatusThuncCreator }),\r\n\r\n)(ProfileStatusWithHooks);\r\n","import React, { useEffect } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { ContactsType, ProfileType } from \"../../../types/types\";\r\n\r\ntype PropsType = {\r\n\tprofile: ProfileType\r\n\tsaveProfile: (profile: ProfileType) => void\r\n\tgoToExitEditMode: () => void\r\n}\r\n//todo типизация вычисляемых свойств\r\n\r\nconst ProfileDataForm: React.FC<PropsType> = ({ saveProfile, goToExitEditMode, profile}) => {\r\n\tconst { register, handleSubmit, reset, setValue, formState: { errors } } = useForm<ProfileType>();\r\n\tconst onSubmit = (data: ProfileType) => {\r\n\t\tsaveProfile(data);\r\n\t\tgoToExitEditMode();\r\n\t\tconsole.log(data.contacts);\r\n\t}\r\n\tsetValue('fullName', profile.fullName)\r\n\tsetValue('aboutMe', profile.aboutMe)\r\n\tsetValue('lookingForAJob', profile.lookingForAJob)\r\n\tsetValue('lookingForAJobDescription', profile.lookingForAJobDescription)\r\n\t// @ts-ignore\r\n\tObject.keys(profile.contacts).forEach((key) => { setValue(`contacts.${key}`, profile.contacts[key as keyof ContactsType])})\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t<div>\r\n\t\t\t\t<button>save</button>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h2>Full Name:</h2>\r\n\t\t\t\t<input type=\"text\" {...register(\"fullName\")} />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h2>About me:</h2>\r\n\t\t\t\t<input type=\"text\" {...register(\"aboutMe\")} />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div>Contacts:{Object.keys(profile.contacts).map(item => {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\treturn <p key={item}>{item}: <input type=\"text\" {...register(`contacts.${item}`)} /></p>//не работает//!\r\n\t\t\t\t})}</div>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h2>Looking for a job?</h2>\r\n\t\t\t\t<input type=\"checkbox\" {...register(\"lookingForAJob\")} />\r\n\t\t\t\t<label> yes</label>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h2>Looking for a job description</h2>\r\n\t\t\t\t<input type=\"text\" {...register(\"lookingForAJobDescription\")} />\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nexport default ProfileDataForm;","import React, { ChangeEvent } from \"react\";\r\nimport Preloader from '../../common/Preloader/Preloader';\r\nimport s from './ProfileInfo.module.css';\r\nimport * as axios from 'axios';\r\nimport ProfileStatusWithHoocs from './ProfileStatusWithHoocs';\r\nimport userPhoto from '../../../assets/images/user.png';\r\nimport { useState } from 'react';\r\nimport ProfileDataForm from \"./ProfileDataForm\";\r\nimport { ProfileType } from \"../../../types/types\";\r\n\r\ntype PropsType = {\r\n\tprofile: ProfileType \r\n\tisOwner: boolean\r\n\tsavePhoto: (file: File) => void\r\n\tsaveProfile: (profile: ProfileType) => void\r\n}\r\n\r\nconst ProfileInfo: React.FC<PropsType> = (props) => {\r\n\r\n\tlet [editMode, setEditMode] = useState(false);\r\n\r\n\tif (!props.profile) {\r\n\t\treturn <Preloader />\r\n\t}\r\n\r\n\tconst onMainPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tif (e.target.files?.length) {\r\n\t\t\tprops.savePhoto(e.target.files[0]);\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className={s.discriptionBlock}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<img src={props.profile.photos.large || userPhoto} alt=\"avatar\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t{props.isOwner && <input type=\"file\" onChange={onMainPhotoSelected} />}\r\n\t\t\t\t<ProfileStatusWithHoocs />\r\n\t\t\t\t{editMode ? <ProfileDataForm goToExitEditMode={() => { setEditMode(false) }}  {...props} /> : <ProfileData goToEditMode={() => { setEditMode(true) }} {...props}/>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\ntype ProfileDataPropsType = {\r\n\tisOwner: boolean\r\n\tprofile: ProfileType\r\n\tgoToEditMode: () => void\r\n}\r\n\r\nconst ProfileData: React.FC<ProfileDataPropsType> = ({ profile, isOwner, goToEditMode}) => {\r\n\treturn(\r\n\t\t<div>\r\n\t\t\t{isOwner && <div>\r\n\t\t\t\t<button onClick={goToEditMode}>edit profile</button>\r\n\t\t\t</div>}\r\n\t\t\t<div>\r\n\t\t\t\t<h1>{profile.fullName}</h1>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h2>About me:</h2>\r\n\t\t\t\t<p>{profile.aboutMe}</p>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h2>Contacts:</h2>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>{profile.contacts.facebook}</li>\r\n\t\t\t\t\t<li>{profile.contacts.website}</li>\r\n\t\t\t\t\t<li>{profile.contacts.vk}</li>\r\n\t\t\t\t\t<li>{profile.contacts.twitter}</li>\r\n\t\t\t\t\t<li>{profile.contacts.instagram}</li>\r\n\t\t\t\t\t<li>{profile.contacts.youtube}</li>\r\n\t\t\t\t\t<li>{profile.contacts.github}</li>\r\n\t\t\t\t\t<li>{profile.contacts.mainLink}</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h2>Looking for a job?</h2>\r\n\t\t\t\t<p>{profile.lookingForAJob ? 'yes' : 'no'}</p>\r\n\t\t\t\t<h2>Looking for a job description:</h2>\r\n\t\t\t\t<p>{profile.lookingForAJobDescription}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\n\r\n\r\nexport default ProfileInfo;\r\n","import React from \"react\";\r\nimport s from './Post.module.css';\r\n\r\ntype PropsType = {\r\n\tmessage: string\r\n\tlikesCount: number\r\n}\r\n//todo фото из стейта нужно\r\nconst Post: React.FC<PropsType> = (props) => {\r\n\treturn (\r\n\t<div className={s.item}>\r\n\t\t<img src=\"https://yt3.ggpht.com/ytc/AKedOLQ6xaEG8GLRO1JWBwMuGk_0kqX26eKrotXaqad76g=s900-c-k-c0x00ffffff-no-rj\" alt=\"\" />\r\n\t\t{ props.message}\r\n\t\t<div>\r\n\t\t\t\t<span>like</span> {props.likesCount}\r\n\t\t</div>\r\n\t</div>\r\n\t)\r\n}\r\nexport default Post;","import s from './MyPosts.module.css';\r\nimport Post from './Post/Post';\r\nimport React, { memo } from 'react';\r\nimport { useForm } from \"react-hook-form\";\r\nimport { PostType } from '../../../types/types';\r\n\r\nexport type MapPropsType = {\r\n\tposts: Array<PostType>\r\n}\r\n\r\nexport type DispatchPropsType = {\r\n\taddPost: (newPost: string) => void\r\n}\r\n\r\nconst MyPosts: React.FC<MapPropsType & DispatchPropsType> = React.memo(props => {\r\n\tlet postsElement = props.posts.map(p => <Post message={p.message} key={p.id} likesCount={p.likesCount} />)\r\n\r\n\treturn (\r\n\t\t<div className={s.postsBlock}>\r\n\t\t\t<div>\r\n\t\t\t\t<h3>\r\n\t\t\t\t\tMy posts\r\n\t\t\t\t</h3>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<AddPostForm {...props} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={s.messageBlock}>\r\n\t\t\t\t\t{postsElement}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n})\r\n\r\n\r\n\r\n\r\ntype AddPostFormType = {\r\n\taddPost: (newPost: string) => void\r\n}\r\n\r\ntype FormValues = {\r\n\tpost: string;\r\n};\r\n\r\nconst AddPostForm: React.FC<AddPostFormType> = (props) => {\r\n\tconst { register, handleSubmit, reset, formState: { errors } } = useForm<FormValues>({mode: 'onBlur'});\r\n\tconst onSubmit = (data: FormValues) => {\r\n\t\tprops.addPost(data.post)\r\n\t\treset();\r\n\t}\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t<div className={s.formBlock}>\r\n\t\t\t\t<textarea className={errors?.post && s.error} {...register(\"post\", {\r\n\t\t\t\t\trequired: 'Field is requared',\r\n\t\t\t\t\tmaxLength: {\r\n\t\t\t\t\t\tvalue: 30,\r\n\t\t\t\t\t\tmessage: 'Max length is 30 symbols'}\r\n\t\t\t\t})} />\r\n\t\t\t</div>\r\n\t\t\t<div style={{color: 'red'}}>\r\n\t\t\t\t{errors?.post && <p>{errors?.post?.message || \"Error!\"}</p>}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<input type=\"submit\" value=\"Add post\" />\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nexport default MyPosts;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { actions} from '../../../redux/profileReducer';\r\nimport { AppStateType } from '../../../redux/redux-store';\r\nimport MyPosts, { DispatchPropsType, MapPropsType } from './MyPosts';\r\n\r\n\r\nconst { addPost } = actions\r\n\r\nconst mapStateToProps = (state: AppStateType) => {\r\n\treturn {\r\n\t\tposts: state.profilePage.posts,\r\n\t}\r\n}\r\n\r\n\r\n\r\nconst MyPostsContainer = connect<MapPropsType, DispatchPropsType, {}, AppStateType>(mapStateToProps, {addPost})(MyPosts)\r\n\r\nexport default MyPostsContainer;","import React from \"react\";\r\nimport s from './Profile.module.css';\r\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\r\nimport MyPostsContainer from './MyPosts/MyPostsContainer';\r\nimport { ProfileType } from \"../../types/types\";\r\n\r\ntype PropsType = {\r\n\tisOwner: boolean\r\n\tprofile: ProfileType\r\n\tsaveProfile: (profile: ProfileType) => void\r\n\tsavePhoto: (file: File) => void\r\n}\r\n\r\nconst Profile: React.FC<PropsType> = (props) => {\r\n\treturn (\r\n\t\t<div className={s.pad}>\r\n\t\t\t<ProfileInfo saveProfile={props.saveProfile} isOwner={props.isOwner} profile={props.profile} savePhoto={props.savePhoto} />\r\n\t\t\t<MyPostsContainer />\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default Profile;","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { AppStateType } from \"../redux/redux-store\";\r\n\r\nlet mapStateToPropsForRedirect = (state: AppStateType) => ({\r\n\tisAuth: state.auth.isAuth\r\n} as MapPropsType);\r\n\r\ntype MapPropsType = {\r\n\tisAuth: boolean\r\n}\r\ntype DispatchPropsType = {\r\n}\r\n\r\nexport function withAuthRedirect<WCP>(WrappedComponent: React.ComponentType<WCP>) {\r\n\r\n\tconst RedirectComponent: React.FC<MapPropsType & DispatchPropsType> = (props) => {\r\n\t\tlet { isAuth, ...restProps } = props\r\n\r\n\t\tif (!isAuth) return <Redirect to='/login' />\r\n\r\n\t\treturn <WrappedComponent {...restProps as WCP} />\r\n\t}\r\n\r\n\tlet ConnectedAuthRedirectComponent = connect<MapPropsType, DispatchPropsType, WCP, AppStateType>(\r\n\t\tmapStateToPropsForRedirect, {})\r\n\t\t(RedirectComponent)\r\n\r\n\treturn ConnectedAuthRedirectComponent;\r\n}\r\n","import React from \"react\";\r\nimport Profile from \"./Profile\";\r\nimport { connect } from \"react-redux\";\r\nimport { getStatusThuncCreator, getUserProfileThunkCreator, savePhoto, saveProfile, actions } from \"../../redux/profileReducer\";\r\nimport { withAuthRedirect } from \"../../HOC/withAuthRedirect\";\r\nimport { compose } from \"redux\";\r\nimport { AppStateType } from \"../../redux/redux-store\";\r\nimport { ProfileType } from \"../../types/types\";\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\n\r\nconst { setUserProfile } = actions\r\n\r\ntype MapPropsType = ReturnType<typeof mapStateToProps>\r\n\r\ntype DispatchPropsType = {\r\n\tsetUserProfile: (userId: number) => void\r\n\tgetUserProfileThunkCreator: (userId: number) => void\r\n\tgetStatusThuncCreator: (userId: number) => void\r\n\tsavePhoto: (file: File) => void\r\n\tsaveProfile: (profile: ProfileType) => void\r\n}\r\n\r\ntype PathParamsType = {\r\n\tuserId: string\r\n}\r\n\r\ntype PropsType = MapPropsType & DispatchPropsType & RouteComponentProps<PathParamsType>;\r\n\r\nclass ProfileContainer extends React.Component<PropsType> {\r\n\trefreshProfile() {\r\n\t\tlet userId: number | null = +this.props.match.params.userId;\r\n\t\tif (!userId) {\r\n\t\t\tuserId = this.props.userId;\r\n\t\t}\r\n\t\tif (!userId) {\r\n\t\t\tconsole.error(\"ID should exists in URI params or in state ('authorizedUserId')\");\r\n\t\t} else {\r\n\t\tthis.props.getUserProfileThunkCreator(userId)\r\n\t\tthis.props.getStatusThuncCreator(userId)\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.refreshProfile();\r\n\t}\r\n\tcomponentDidUpdate(prevProps: PropsType, prevState: PropsType) {\r\n\t\tif (this.props.match.params.userId != prevProps.match.params.userId) {//только если предыдущ пропсы не равны\r\n\t\t\tthis.refreshProfile();\r\n\t\t}\r\n\t\t\r\n\t}\r\n\trender () {\r\n\t\treturn (\r\n\t\t\t// todo: profile | null падает ошибка!\r\n\t\t\t// @ts-ignore\r\n\t\t\t<Profile isOwner={!this.props.match.params.userId} {...this.props} profile={this.props.profile} savePhoto={this.props.savePhoto}/>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n//let AuthRedirectComponent = withAuthRedirect(ProfileContainer)// это наш контейнерный компонет его рисует ithUrlDataContainerComponent, а он рисует ProfileContainer \r\n\r\nconst mapStateToProps = (state: AppStateType) => {\r\n\treturn ({\r\n\t\tprofile: state.profilePage.profile,\r\n\t\tuserId: state.auth.id,\r\n\t\t//isAuth: state.auth.IsAuth\r\n\t})\r\n}\r\n\r\n//let WithUrlDataContainerComponent = withRouter(AuthRedirectComponent)\r\n\r\n//export default connect(mapStateToProps, { setUserProfile, getUserProfileThunkCreator })(WithUrlDataContainerComponent);\r\n\r\nexport default compose<React.ComponentType>(\r\n\tconnect(mapStateToProps, { setUserProfile, getUserProfileThunkCreator, getStatusThuncCreator, savePhoto, saveProfile }),\r\n\twithRouter,\r\n\twithAuthRedirect,\r\n)(ProfileContainer)\r\n","import React from \"react\";\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './DialogItem.module.css';\r\n\r\ntype PropsType = {\r\n\tname: string\r\n\tid: number\r\n}\r\n\r\n\r\nconst DialogItem: React.FC<PropsType> = (props) => {\r\n\treturn(\r\n\t\t<div className={s.nameChat}>\r\n\t\t\t<NavLink to={\"/dialogs/\" + props.id}><img src=\"https://yt3.ggpht.com/ytc/AKedOLQ6xaEG8GLRO1JWBwMuGk_0kqX26eKrotXaqad76g=s900-c-k-c0x00ffffff-no-rj\" alt=\"\" />{props.name}</NavLink>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default DialogItem","import s from './Message.module.css';\r\n\r\ntype PropsType = {\r\n\tmessage: string\r\n}\r\n\r\nconst Message: React.FC<PropsType> = (props) => {\r\n\treturn (\r\n\t\t<div className={s.message}>{props.message}</div>\r\n\t)\r\n}\r\n\r\nexport default Message;","import DialogItem from './DialogItem/DialogItem';\r\nimport s from './Dialogs.module.css';\r\nimport Message from './Message/Message';\r\nimport React from 'react';\r\nimport { useForm } from \"react-hook-form\";\r\nimport { DialogType, InitialStateType, MessageType } from '../../redux/dialogsReducer';\r\n\r\ntype PropsType = {\r\n\tdialogsPage: InitialStateType //именно из dialogs reducer\r\n\tdialogs: Array<DialogType>\r\n\tmessages: Array<MessageType>\r\n\taddMessage: (newMessage: string) => void\r\n}\r\n\r\nconst Dialogs: React.FC<PropsType> = (props) => {\r\n\tlet dialogsElements = props.dialogs.map((d) => <DialogItem id={d.id} key={d.id} name={d.name} />)\r\n\tlet messagesElements = props.messages.map((m) => <Message message={m.message} key={m.id} />)\r\n\r\n\treturn (\r\n\t\t<div className={s.dialogs}>\r\n\t\t\t<div className={s.dialogs__item}>\r\n\t\t\t\t{dialogsElements}\t\r\n\t\t\t</div>\r\n\t\t\t<div className={s.messages}>\r\n\t\t\t\t{messagesElements}\r\n\t\t\t</div>\r\n\t\t\t<div className={s.dialogInput}>\r\n\t\t\t\t<AddMessageForm {...props} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\ntype AddMessageFormType = {\r\n\taddMessage: (newMessage: string) => void\r\n}\r\n\r\ntype FormValues = {\r\n\tmessage: string;\r\n};\r\n\r\nconst AddMessageForm: React.FC<AddMessageFormType> = (props) => {\r\n\tconst { register, handleSubmit, reset, formState: { errors } } = useForm<FormValues>();\r\n\tconst onSubmit = (data: FormValues) => {\r\n\t\tprops.addMessage(data.message);\r\n\t\treset();\r\n\t}\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t\t<textarea  {...register(\"message\")} />\r\n\t\t\t<input type=\"submit\" value=\"send\" />\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nexport default Dialogs;","import React from 'react';\r\nimport { actions } from '../../redux/dialogsReducer';\r\nimport Dialogs from './Dialogs';\r\nimport { connect } from 'react-redux';\r\nimport { withAuthRedirect } from '../../HOC/withAuthRedirect';\r\nimport { compose } from 'redux';\r\nimport { AppStateType } from '../../redux/redux-store';\r\n\r\n\r\nconst mapStateToProps = (state: AppStateType) => {\r\n\treturn {\r\n\t\tdialogs: state.dialogsPage.dialogs,\r\n\t\tmessages: state.dialogsPage.messages,\r\n\t\tisAuth: state.auth.isAuth\r\n\t}\r\n}\r\n\r\n\r\nexport default compose<React.ComponentType>(// <React.ComponentType> это для react lazy\r\n\tconnect(mapStateToProps, {...actions}),\r\n\twithAuthRedirect,\r\n) (Dialogs);","import React, { Suspense } from \"react\";\r\n\r\nexport function withSuspense<WCP> (WrappedComponent: React.ComponentType<WCP>) {\r\n\r\n\treturn (props: WCP) => {\r\n\t\treturn <Suspense fallback={<div>Загрузка...</div>}>\r\n\t\t\t<WrappedComponent {...props} />\r\n\t\t</Suspense>\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport { useForm, Controller, NestedValue } from \"react-hook-form\";\r\nimport s from './Login.module.css';\r\nimport { Form, Input, Button, Checkbox } from 'antd';\r\nimport { connect, useDispatch, useSelector } from \"react-redux\";\r\nimport { loginTC } from \"../../redux/auth-reducer\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { AppStateType } from \"../../redux/redux-store\";\r\n\r\ntype PropsType = {\r\n\tcaptchaUrl: string | null\r\n\tisWrong: boolean\r\n\tonSubmitCall: (formData: LoginFormValuesType) => void\r\n}\r\n\r\nconst Loginform: React.FC<PropsType> = ({ isWrong, onSubmitCall, captchaUrl}) => {\r\n\tconst { control, register, handleSubmit, reset, formState: { errors } } = useForm();\r\n\tconst onSubmit = (formData:any) => {\r\n\t\tonSubmitCall(formData);\r\n\t\treset();\r\n\t} \r\n\treturn (\r\n\t\t<div className={s.formBlock}>\r\n\t\t\t<form onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{isWrong && <p>login/password incorrect</p>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trules={{ required: 'First name required' }}\r\n\t\t\t\t\t\trender={({ field: { onChange, value } }) => (\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t\tplaceholder=\"login\"\r\n\t\t\t\t\t\t\t\tclassName={(errors?.email || isWrong) && s.error}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\trender={({ field: { onChange, value } }) => (\r\n\t\t\t\t\t\t\t<Input.Password\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t\tplaceholder=\"password\"\r\n\t\t\t\t\t\t\t\tclassName={(errors?.password || isWrong) && s.error}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tdefaultValue=\"false\"\r\n\t\t\t\t\t\tname=\"rememberMe\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field: { onChange, value } }) => (\r\n\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\t\t>Remember me</Checkbox>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{captchaUrl && <img src={captchaUrl} />}\r\n\t\t\t\t{captchaUrl && <input type=\"text\" {...register(\"captcha\")} />}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\ntype LoginFormValuesType = {\r\n\temail: string\r\n\tpassword: string\r\n\trememberMe: boolean\r\n\tcaptcha: string\r\n}\r\n\r\n\r\n\r\n\r\nexport const Login: React.FC = () => {\r\n\tconst captchaUrl = useSelector((state: AppStateType) => state.auth.captchaUrl)\r\n\tconst isAuth = useSelector((state: AppStateType) => state.auth.captchaUrl)\r\n\tconst isWrong = useSelector((state: AppStateType) => state.auth.isWrong)\r\n\r\n\tconst dispatch = useDispatch()\r\n\r\n\r\n\r\n\tconst onSubmitCall = (formData: LoginFormValuesType) => {\r\n\t\tdispatch(loginTC(formData.email, formData.password, formData.rememberMe, formData.captcha))\r\n\t}\r\n\tif (isAuth) {\r\n\t\treturn <Redirect to={\"/profile\"} />\r\n\t}\r\n\treturn <div>\r\n\t\t<h1 className={s.title}>Login</h1>\r\n\t\t<Loginform isWrong={isWrong} onSubmitCall={onSubmitCall} captchaUrl={captchaUrl}/>\r\n\t</div>\r\n}\r\n\r\n\r\n","import {AppStateType} from './redux-store'\r\n\r\nexport const selectIsAuth = (state: AppStateType) => {\r\n    return state.auth.isAuth\r\n}\r\n\r\nexport const selectCurrentUserLogin = (state: AppStateType) => {\r\n    return state.auth.login\r\n}\r\n\r\n\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport s from './Header.module.css';\r\nimport { Button, Space } from 'antd';\r\nimport { PoweroffOutlined } from '@ant-design/icons';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectCurrentUserLogin, selectIsAuth } from \"../../redux/auth-selectors\";\r\nimport { logout } from \"../../redux/auth-reducer\";\r\n\r\nexport type MapPropsType = {\r\n}\r\n \r\nexport const HeaderLogin: React.FC<MapPropsType> = (props) => {\r\n\r\n\tconst isAuth = useSelector(selectIsAuth)\r\n\tconst login = useSelector(selectCurrentUserLogin)\r\n\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst logoutCallback = () => {\r\n\t\tdispatch(logout())\r\n\t}\r\n\r\n\treturn (\r\n\t\t<header className={s.header}>\r\n\t\t\t<div className={s.login__block}>\r\n\t\t\t\t{isAuth \r\n\t\t\t\t\t? <div>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{`${login} `}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\ticon={<PoweroffOutlined />}\r\n\t\t\t\t\t\t\t\tonClick={() => { logoutCallback()}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t: <NavLink to={'/login'}>Login</NavLink>}\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t)\r\n}\r\n","import React, { Suspense } from \"react\";\r\nimport \"antd/dist/antd.css\";\r\nimport './App.css';\r\nimport Navbar from './components/Navbar/Navbar';\r\nimport Settings from './components/Settings/Settings';\r\nimport News from './components/News/News';\r\nimport Music from './components/Music/Music';\r\nimport NotesContainer from './components/Notes/NotesContainer';\r\nimport { UsersPage } from './components/Users/UsersContainer';\r\nimport ProfileContainer from './components/Profile/ProfileContainer';\r\nimport { NavLink, Route } from 'react-router-dom';\r\nimport { connect } from \"react-redux\";\r\nimport { initializeApp } from \"./redux/appReducer\";\r\nimport Preloader from \"./components/common/Preloader/Preloader\";\r\nimport { compose } from \"redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport DialogsContainer from './components/Dialogs/DialogsContainer';\r\nimport { withSuspense } from \"./HOC/withSuspense\";\r\nimport { AppStateType } from \"./redux/redux-store\";\r\nimport { Login } from \"./components/Login/Login\";\r\nimport { Button, Col, Row } from \"antd\";\r\n//const DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer')); // изменить имя\r\n\r\nimport { Layout, Menu, Breadcrumb } from 'antd';\r\nimport { UserOutlined, LaptopOutlined, NotificationOutlined } from '@ant-design/icons';\r\nimport { HeaderLogin } from \"./components/Header/HeaderLogin\";\r\n\r\n\r\nconst { SubMenu } = Menu;\r\nconst { Header, Content, Footer, Sider } = Layout;\r\n\r\nconst ChatPage = React.lazy(() => import('./pages/Chat/ChatPage'));\r\n\r\n\r\n\r\ntype MapPropsType = ReturnType<typeof mapStateToProps>\r\ntype DispatchPropsType = {\r\n  initializeApp: () => void\r\n}\r\n\r\nconst SuspendedDialogs = withSuspense(DialogsContainer);\r\nconst SuspendedProfile = withSuspense(ProfileContainer);\r\nconst SuspendedChat = withSuspense(ChatPage);// обертка наш HOC \r\n\r\nclass App extends React.Component<MapPropsType & DispatchPropsType> {\r\n  componentDidMount() {\r\n    this.props.initializeApp();\r\n  }\r\n  render() {\r\n    if (!this.props.initialized) {\r\n      return (<Preloader />)\r\n    }\r\n    return (\r\n      <Layout>\r\n        <Header className=\"header\">\r\n          <div className=\"logo\" />\r\n          <Row>\r\n            <Col flex=\"auto\">\r\n              <Menu theme=\"dark\" mode=\"horizontal\" /* defaultSelectedKeys={['2']} */>\r\n                <Menu.Item key=\"1\"><NavLink to=\"/profile\">Profile</NavLink></Menu.Item>\r\n                <Menu.Item key=\"2\"><NavLink to=\"/users\">Users</NavLink></Menu.Item>\r\n              </Menu>\r\n            </Col>\r\n            <Col flex=\"none\">\r\n              <HeaderLogin />\r\n            </Col>\r\n          </Row>\r\n        </Header>\r\n        <Content style={{ padding: '0 50px' }}>\r\n          <Layout className=\"site-layout-background\" style={{ padding: '24px 0' }}>\r\n            <Sider className=\"site-layout-background\" width={200}>\r\n              <Menu\r\n                mode=\"inline\"\r\n                /* defaultSelectedKeys={['1']} */\r\n                /* defaultOpenKeys={['sub1']} */\r\n                style={{ height: '100%' }}\r\n              >\r\n                <SubMenu key=\"sub1\" icon={<UserOutlined />} title=\"My Profile\">\r\n                  <Menu.Item key=\"1\"><NavLink to=\"/profile\">Profile</NavLink></Menu.Item>\r\n                  <Menu.Item key=\"2\"><NavLink to=\"/dialogs\">Messages</NavLink></Menu.Item>\r\n                </SubMenu>\r\n                <SubMenu key=\"sub2\" icon={<LaptopOutlined />} title=\"Users\">\r\n                  <Menu.Item key=\"3\"><NavLink to=\"/users\">Users</NavLink></Menu.Item>\r\n                </SubMenu>\r\n                <SubMenu key=\"sub3\" icon={<NotificationOutlined />} title=\"Other\">\r\n                  <Menu.Item key=\"4\"><NavLink to=\"/news\">News</NavLink></Menu.Item>\r\n                  <Menu.Item key=\"5\"><NavLink to=\"/music\">githubAPI</NavLink></Menu.Item>\r\n                  <Menu.Item key=\"6\"><NavLink to=\"/notes\">Notes</NavLink></Menu.Item>\r\n                  <Menu.Item key=\"7\"><NavLink to=\"/settings\">Settings</NavLink></Menu.Item>\r\n                  <Menu.Item key=\"8\"><NavLink to=\"/chat\">Chat</NavLink></Menu.Item>\r\n                </SubMenu>\r\n              </Menu>\r\n            </Sider>\r\n            <Content style={{ padding: '0 24px', minHeight: 280 }}>\r\n              <div >\r\n                <Route path=\"/dialogs\" render={() => <SuspendedDialogs />} />\r\n                <Route path=\"/profile/:userId?\" render={() => <SuspendedProfile />} />\r\n                <Route path=\"/news\" render={() => <News />} />\r\n                <Route path=\"/music\" render={() => <Music />} />\r\n                <Route path=\"/notes\" render={() => <NotesContainer />} />\r\n                <Route path=\"/users\" render={() => <UsersPage pageTitle={'example'} />} />\r\n                <Route path=\"/settings\" render={() => <Settings />} />\r\n                <Route path=\"/login\" render={() => <Login />} />\r\n                <Route path=\"/chat\" render={() => <SuspendedChat />} />\r\n              </div>\r\n            </Content>\r\n          </Layout>\r\n        </Content>\r\n        <Footer style={{ textAlign: 'center' }}> ©2022 </Footer>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = (state: AppStateType) => ({\r\n  initialized: state.app.initialized\r\n\r\n})\r\nexport default compose(\r\n  withRouter,\r\n  connect(mapStateToProps, { initializeApp }))(App);\r\n\r\n/*<div className=\"app-wrapper\">\r\n  <HeaderContainer />\r\n  <Navbar />\r\n  <div className='app-wrapper-content'>\r\n    <Route path=\"/dialogs\" render={() => <SuspendedDialogs />} />\r\n    <Route path=\"/profile/:userId?\" render={() => <SuspendedProfile />} />\r\n    <Route path=\"/news\" render={() => <News />} />\r\n    <Route path=\"/music\" render={() => <Music />} />\r\n    <Route path=\"/notes\" render={() => <NotesContainer />} />\r\n    <Route path=\"/users\" render={() => <UsersPage pageTitle={'example'} />} />\r\n    <Route path=\"/settings\" render={() => <Settings />} />\r\n    <Route path=\"/login\" render={() => <Login />} />\r\n  </div>\r\n</div>\r\n*/","import reportWebVitals from './reportWebVitals';\nimport store from './redux/redux-store';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\n\n\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<BrowserRouter basename={process.env.PUBLIC_URL}>\n\t\t\t<Provider store={store}>\n\t\t\t\t<App />\n\t\t\t</Provider>\n\t\t</BrowserRouter>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n/*rerenderEntireTree(store.getState());\nstore.subscribe(rerenderEntireTree);\nstore redux не умеет передавть стор, поэтому мы через анонимную функцию это сделаем*/\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user__wrapper\":\"User_user__wrapper__1vcrP\",\"user__leftBlock\":\"User_user__leftBlock__3iQbI\",\"user__rightBlock\":\"User_user__rightBlock__1qDl1\",\"user__foto\":\"User_user__foto__13quP\",\"user__button\":\"User_user__button__3pLcR\",\"user__name\":\"User_user__name__3b3rv\",\"user__location\":\"User_user__location__30MDn\",\"user__locationCity\":\"User_user__locationCity__2Lbz5\",\"user__locationCountry\":\"User_user__locationCountry__Nk4IE\",\"user__status\":\"User_user__status__2dS5k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notes__wrapper\":\"Notes_notes__wrapper__JihYO\",\"notes__title\":\"Notes_notes__title__2EFCQ\",\"notes__visualBlock\":\"Notes_notes__visualBlock__2RSOb\",\"notes__sendBlock\":\"Notes_notes__sendBlock__1c81h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__hZDAG\",\"messageBlock\":\"MyPosts_messageBlock__WsGmt\",\"error\":\"MyPosts_error__2l0HC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__1pvPu\",\"dialogs__item\":\"Dialogs_dialogs__item__1h8Mb\",\"dialog\":\"Dialogs_dialog__3X4PV\",\"active\":\"Dialogs_active__32DQC\",\"messages\":\"Dialogs_messages__2oy_z\",\"dialogInput\":\"Dialogs_dialogInput__3x-dx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formBlock\":\"Login_formBlock__3ddug\",\"title\":\"Login_title__lau2c\",\"error\":\"Login_error__1sfQt\"};"],"sourceRoot":""}